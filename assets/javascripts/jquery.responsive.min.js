(function(f,g,i,c){var l,h;function e(){this.ranges=new d();this.engine=new k()}e.STATES={ENTERS:"enters",EXITS:"exits"};function k(){var o=0,u=this,n,p,s,r,q,t;this.start=function(v,w){g=f(w);o=g.width();n=v;p=n.sort();s=p.length;t=this.get_current();this.set_current_state();g.bind("resize",this.on_resize)};this.stop=function(){g.unbind("resize",this.on_resize)};this.set_current_state=function(){if(!t){if(n.min>o){n.before_first();(r=n.get_next()).exits(o)}else{n.after_last();(q=n.get_prev()).exits(o)}}else{r=n.get_next();if(r){r.exits(o)}q=n.get_prev();t.enters(o)}};this.get_current=function(){return n.next_until(function(v){return v.from<o&&v.to>o})};this.on_resize=function(x){o=g.width();var v=o>n.max,w=o<n.min;if(!t){if(q&&q.to>o){n.prev();m();t.enters(o)}else{if(r&&r.from<o){n.next();m();t.enters(o)}}}else{if(!w&&o<t.from){t.exits(o);n.prev();m();if(t){t.enters(o)}}else{if(!v&&o>t.to){t.exits(o);r.enters(o);n.next();m()}else{if(v&&t){t.exits(o);n.next();m()}else{if(w&&t){t.exits(o);n.prev();m()}}}}}};function m(){t=n.current();r=n.get_next();q=n.get_prev()}}function d(){var p,m=[],n=0,o=0;this.from=function(s,r,q){if(this.min==c||this.min>s){this.min=s}if(this.max==c||this.max<r){this.max=r}p=new b(s,r,q);o++;m.push(p)};this.index=function(){return n};this.current_range=function(){return p};this.enter=function(){p.add_callback.call(p,arguments,e.STATES.ENTERS)};this.exit=function(){p.add_callback.call(p,arguments,e.STATES.EXITS)};this.sort=function(){m=m.sort(function(r,q){return r.from>q.from||r.to>q.to});return m};this.has_next=function(){return n<m.length};this.has_prev=function(){return n<0};this.current=function(){return m[n]};this.next=function(){return m[++n]};this.prev=function(){return m[--n]};this.next_until=function(s){var r,q;q=this.current();do{if(s(q)){r=q;break}q=this.next()}while(this.has_next());return r};this.is_before_first=function(){return n<0};this.before_first=function(){n=-1};this.is_after_last=function(){return n>=o};this.after_last=function(){n=o};this.get_next=function(){return m[n+1]};this.get_prev=function(){return m[n-1]}}function b(o,m,n){this.from=o;this.to=m;this.callbacks={};this.key=(n)||(null)}h=b.prototype,l=e.prototype;h.add_callback=function(n,o){var p=(this.callbacks[o])||(this.callbacks[o]=[]);for(var m in n){m=n[m];switch(typeof m){case"function":p.push(m);break}}};h.toString=function(){return"("+this.from+"..."+this.to+")"};h.execute=function(n,m){var o=this.callbacks[n];if(!o){return}for(var p in o){o[p](this.from,this.to,m,n,this.key)}};for(var a in e.STATES){(function(){var m=e.STATES[a];h[m]=function(n){this.execute(m,n)}})()}l.from=function(o,n,m){this.ranges.from(o,n,m);return this};l.enter=function(){this.ranges.enter.apply(this.ranges,arguments);return this};l.exit=function(){this.ranges.exit.apply(this.ranges,arguments);return this};l.start=function(){this.engine.start(this.ranges,g);return this};l.stop=function(){this.engine.stop();return this};var j;f.responsive=function(){if(!j){j=new e()}return j}})(jQuery,window,document);